(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[464],{373:(e,t,a)=>{"use strict";var s;a.d(t,{H:()=>r});let r=(null==(s=a(5704).env.NEXT_PUBLIC_API_URL)?void 0:s.trim())||"https://sportkeeper.onrender.com"},667:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155),r=a(2821);function n(e){let{className:t,children:a,variant:n="primary",loading:i,disabled:c,...l}=e;return(0,s.jsxs)("button",{className:(0,r.A)("inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium transition",{primary:"bg-black text-white hover:opacity-90",secondary:"bg-gray-200 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700",ghost:"hover:bg-gray-100"}[n],c||i?"opacity-50 cursor-not-allowed":"",t),disabled:c||i,...l,children:[i&&(0,s.jsx)("span",{className:"mr-2 inline-block size-4 animate-spin border-2 border-gray-300 border-r-transparent rounded-full"}),a]})}},2821:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=function(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=function e(t){var a,s,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(a=0;a<n;a++)t[a]&&(s=e(t[a]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}(e))&&(s&&(s+=" "),s+=t);return s}},2956:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(5155),r=a(2115),n=a(7621),i=a(8829),c=a(667),l=a(8297),o=a(7e3);let d=e=>e&&16===e.length?e+":00":e;function u(){let[e,t]=(0,r.useState)([]),[a,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[x,g]=(0,r.useState)(30),[p,f]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>t(await (0,n.Vg)("/api/slots")))()},[]);let A=async()=>{try{w(!0),await (0,n.$P)("/api/admin/slots",{startAt:d(a),endAt:d(m),capacity:x,name:p,description:y}),v("Slot creado"),u(""),h(""),g(30),t(await (0,n.Vg)("/api/slots"))}catch(e){v(e.message||"Error")}finally{w(!1)}},k=async(e,a)=>{try{await (0,n.mu)("/api/admin/slots/".concat(e),{capacity:a}),t(await (0,n.Vg)("/api/slots"))}catch(e){v(e.message||"Error")}},S=async e=>{try{await (0,n.Al)("/api/admin/slots/".concat(e)),t(await (0,n.Vg)("/api/slots"))}catch(e){v(e.message||"Error")}};return(0,s.jsxs)("main",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Admin / Slots"}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)(l.aR,{children:(0,s.jsx)(l.ZB,{children:"Crear slot"})}),(0,s.jsxs)(l.Wu,{children:[(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-4",children:[(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1",children:"Inicio"}),(0,s.jsx)(i.A,{type:"datetime-local",value:a,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1",children:"Fin"}),(0,s.jsx)(i.A,{type:"datetime-local",value:m,onChange:e=>h(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs mb-1",children:"Capacidad"}),(0,s.jsx)(i.A,{type:"number",value:x,onChange:e=>g(parseInt(e.target.value||"0"))})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1",children:"Nombre"}),(0,s.jsx)(i.A,{value:p,onChange:e=>f(e.target.value)})]}),(0,s.jsxs)("div",{className:"sm:col-span-4",children:[(0,s.jsx)("label",{className:"block text-xs mb-1",children:"Descripci\xf3n"}),(0,s.jsx)(i.A,{value:y,onChange:e=>j(e.target.value)})]}),(0,s.jsx)("div",{className:"sm:col-span-3 flex items-end",children:(0,s.jsx)(c.A,{onClick:A,loading:N,children:"Crear"})})]}),b&&(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:b})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,s.jsxs)(l.Zp,{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.ZB,{children:(0,o.F)(e.startAt,e.endAt)}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.capacity," plazas"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.A,{type:"number",className:"w-24",defaultValue:e.capacity,onBlur:t=>k(e.id,parseInt(t.target.value||"".concat(e.capacity)))}),(0,s.jsx)(c.A,{variant:"danger",onClick:()=>S(e.id),children:"Borrar"})]})]},e.id))})]})}},4270:(e,t,a)=>{Promise.resolve().then(a.bind(a,2956))},7e3:(e,t,a)=>{"use strict";function s(e,t){let a=new Date(e),s=new Date(t);return"".concat(a.toLocaleDateString()," ").concat(a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," â†’ ").concat(s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}a.d(t,{F:()=>s})},7621:(e,t,a)=>{"use strict";a.d(t,{$P:()=>i,Al:()=>l,Vg:()=>n,mu:()=>c});var s=a(373);async function r(e){try{return(await e.json()).message||e.statusText}catch(t){return e.statusText}}async function n(e){let t=localStorage.getItem("token"),a=await fetch("".concat(s.H).concat(e),{headers:t?{Authorization:"Bearer "+t}:void 0});if(!a.ok)throw Error(await r(a));return a.json()}async function i(e,t){let a=localStorage.getItem("token"),n=await fetch("".concat(s.H).concat(e),{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer "+a}:{}},body:JSON.stringify(t)});if(!n.ok)throw Error(await r(n));return n.json()}async function c(e,t){let a=localStorage.getItem("token"),n=await fetch("".concat(s.H).concat(e),{method:"PUT",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer "+a}:{}},body:JSON.stringify(t)});if(!n.ok)throw Error(await r(n));return n.json()}async function l(e){let t=localStorage.getItem("token"),a=await fetch("".concat(s.H).concat(e),{method:"DELETE",headers:t?{Authorization:"Bearer "+t}:void 0});if(!a.ok)throw Error(await r(a))}},8297:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>l,ZB:()=>c,Zp:()=>n,aR:()=>i});var s=a(5155),r=a(2821);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.A)("rounded-2xl bg-white shadow p-4",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.A)("mb-2 flex items-center justify-between",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("h3",{className:(0,r.A)("text-base font-semibold",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.A)("text-sm text-gray-700",t),...a})}},8829:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155),r=a(2821);function n(e){return(0,s.jsx)("input",{...e,className:(0,r.A)("w-full rounded-xl border border-gray-300 px-3 py-2 text-sm outline-none","focus:border-gray-900 focus:ring-2 focus:ring-black/10",e.className)})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=4270)),_N_E=e.O()}]);