(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{373:(e,t,r)=>{"use strict";var a;r.d(t,{H:()=>s});let s=(null==(a=r(5704).env.NEXT_PUBLIC_API_URL)?void 0:a.trim())||"https://sportkeeper.onrender.com"},667:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),s=r(2821);function n(e){let{className:t,children:r,variant:n="primary",loading:l,disabled:o,...i}=e;return(0,a.jsxs)("button",{className:(0,s.A)("inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium transition",{primary:"bg-black text-white hover:opacity-90",secondary:"bg-gray-200 hover:bg-gray-300",danger:"bg-red-600 text-white hover:bg-red-700",ghost:"hover:bg-gray-100"}[n],o||l?"opacity-50 cursor-not-allowed":"",t),disabled:o||l,...i,children:[l&&(0,a.jsx)("span",{className:"mr-2 inline-block size-4 animate-spin border-2 border-gray-300 border-r-transparent rounded-full"}),r]})}},1313:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>o});var a=r(5155),s=r(2115),n=r(373);let l=(0,s.createContext)({token:null,user:null,login:async()=>{},logout:()=>{},register:async()=>{}});function o(e){let{children:t}=e,[r,o]=(0,s.useState)(null),[i,c]=(0,s.useState)(null);async function u(e){let t=await fetch("".concat(n.H,"/api/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("No se pudo cargar el perfil");return t.json()}(0,s.useEffect)(()=>{let e=localStorage.getItem("token");o(e),e&&u(e).then(c).catch(()=>{})},[]);let d=async(e,t)=>{let r=await fetch("".concat(n.H,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)throw Error("Credenciales inv\xe1lidas");let{token:a}=await r.json();localStorage.setItem("token",a),o(a),c(await u(a))},h=async(e,t)=>{if(!(await fetch("".concat(n.H,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})})).ok)throw Error("No se pudo registrar");await d(e,t)};return(0,a.jsx)(l.Provider,{value:{token:r,user:i,login:d,logout:()=>{localStorage.removeItem("token"),o(null),c(null)},register:h},children:t})}let i=()=>(0,s.useContext)(l)},2821:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=function(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}(e))&&(a&&(a+=" "),a+=t);return a}},6814:(e,t,r)=>{Promise.resolve().then(r.bind(r,7322))},7322:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),s=r(1313),n=r(2115),l=r(667),o=r(8829),i=r(8297);function c(){let{token:e,user:t,login:r,register:c,logout:u}=(0,s.A)(),[d,h]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),[f,y]=(0,n.useState)(""),b=async e=>{e.preventDefault();try{m?await c(d,p):await r(d,p),y(m?"Registro y login correctos":"Login correcto")}catch(e){y(e.message||"Error")}};return(0,a.jsx)("main",{className:"space-y-4",children:e?(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{children:["Hola, ",null==t?void 0:t.email]})}),(0,a.jsxs)(i.Wu,{className:"flex gap-2",children:[(null==t?void 0:t.role)==="ADMIN"&&(0,a.jsx)("span",{className:"text-xs rounded-full px-2 py-0.5 bg-black text-white",children:"ADMIN"}),(0,a.jsx)(l.A,{variant:"ghost",onClick:u,children:"Cerrar sesi\xf3n"})]})]}):(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:m?"Crear cuenta":"Acceder"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("form",{className:"space-y-3",onSubmit:b,children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(o.A,{placeholder:"email",value:d,onChange:e=>h(e.target.value)}),(0,a.jsx)(o.A,{type:"password",placeholder:"password",value:p,onChange:e=>g(e.target.value)})]}),(0,a.jsx)(l.A,{type:"submit",className:"w-full",children:m?"Registrarme":"Entrar"}),(0,a.jsx)("button",{type:"button",className:"block w-full text-center text-sm text-gray-700 mt-2 underline",onClick:()=>{x(!m),y("")},children:m?"\xbfYa tienes cuenta? Inicia sesi\xf3n":"\xbfNo tienes cuenta? Reg\xedstrate"}),f&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:f})]})})]})})}},8297:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>i,ZB:()=>o,Zp:()=>n,aR:()=>l});var a=r(5155),s=r(2821);function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,s.A)("rounded-2xl bg-white shadow p-4",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,s.A)("mb-2 flex items-center justify-between",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("h3",{className:(0,s.A)("text-base font-semibold",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,s.A)("text-sm text-gray-700",t),...r})}},8829:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),s=r(2821);function n(e){return(0,a.jsx)("input",{...e,className:(0,s.A)("w-full rounded-xl border border-gray-300 px-3 py-2 text-sm outline-none","focus:border-gray-900 focus:ring-2 focus:ring-black/10",e.className)})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=6814)),_N_E=e.O()}]);